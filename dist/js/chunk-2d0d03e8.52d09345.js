(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d03e8"],{"66c5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("h1",[t._v("分类列表")]),a("el-divider"),a("el-row",{staticClass:"table-button-container",attrs:{gutter:10}},[a("el-col",{attrs:{lg:{span:20}}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.category.name="",t.addDialogDisplay=!0}}},[t._v("添加")])],1),a("el-col",{attrs:{lg:{span:4}}},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{change:function(e){return t.getCategoryList(1)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.categoryListLoading,expression:"categoryListLoading"}],attrs:{data:t.categoryList,stripe:"",border:""},on:{"sort-change":t.orderCategoryList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.infoList,(function(e,i){return a("el-row",{key:i},[a("el-link",{staticStyle:{padding:"0.1rem"},on:{click:function(a){return t.updateArticle(e.articleId)}}},[t._v(t._s(i+1)+" "+t._s(e.title))])],1)}))}}])}),a("el-table-column",{attrs:{label:"id",sortable:"custom",prop:"id",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"分类名称",sortable:"custom",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"引用次数",sortable:"custom",prop:"number",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",sortable:"custom",prop:"createBy",align:"center"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.updateDialogDisplay=!0,t.category.id=e.row.id,t.category.name=e.row.name}}},[t._v("编辑")]),0==e.row.number?a("el-button",{staticClass:"el-button--danger",attrs:{size:"small"},on:{click:function(a){return t.deleteCategory(e.row.id)}}},[t._v("删除")]):a("el-button",{staticClass:"el-button--danger",attrs:{size:"small",disabled:""}},[t._v("删除")])]}}])})],1)],1),a("el-pagination",{attrs:{total:t.total,"current-page":t.pageNum,"page-size":t.pageSize},on:{"current-change":t.getCategoryList}}),a("el-dialog",{attrs:{visible:t.addDialogDisplay,"close-on-click-modal":!1,width:"30%",title:"添加新分类"},on:{"update:visible":function(e){t.addDialogDisplay=e}}},[a("el-form",{staticStyle:{"text-align":"center"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{maxLength:"25","show-word-limit":"",type:"text"},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1),a("el-form-item",[a("el-button",{staticClass:"el-button--primary",on:{click:t.addCategory}},[t._v("提交")]),a("el-button",{on:{click:function(e){t.addDialogDisplay=!1}}},[t._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{visible:t.updateDialogDisplay,"close-on-click-modal":!1,width:"30%",title:"修改分类信息"},on:{"update:visible":function(e){t.updateDialogDisplay=e}}},[a("el-form",{staticStyle:{"text-align":"center"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[a("el-form-item",{attrs:{label:"id"}},[a("el-input",{attrs:{disabled:""},model:{value:t.category.id,callback:function(e){t.$set(t.category,"id",e)},expression:"category.id"}})],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{maxLength:"25","show-word-limit":"",type:"text"},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1),a("el-form-item",[a("el-button",{staticClass:"el-button--primary",on:{click:t.updateCategory}},[t._v("提交")]),a("el-button",{on:{click:function(e){t.updateDialogDisplay=!1}}},[t._v("取消")])],1)],1)],1)],1)},o=[],r=a("bc3a"),n=a.n(r),l=a("5c96"),s={name:"Category",data:function(){return{categoryList:[],pageNum:1,total:0,pageSize:5,categoryListLoading:!1,searchValue:"",orderProperty:"id",orderDirection:"",addDialogDisplay:!1,updateDialogDisplay:!1,category:{id:0,name:""},headerConfig:{headers:{Authorization:""}}}},methods:{updateArticle:function(t){this.$router.push({name:"articleUpdate",query:{id:t}})},addCategory:function(){var t=this,e=this.baseUrl+"/admin/category";n.a.post(e,this.category,this.headerConfig).then((function(e){var a=e.data;200==a.code?(Object(l["Notification"])({title:"提示",message:"添加新分类成功!",type:"success"}),t.addDialogDisplay=!1,t.getCategoryList(t.pageNum)):Object(l["Notification"])({title:"提示",message:"添加新分类失败!",type:"error"})}))},updateCategory:function(){var t=this,e=this.baseUrl+"/admin/category";n.a.put(e,this.category,this.headerConfig).then((function(e){var a=e.data;200==a.code?(Object(l["Notification"])({title:"提示",message:"修改分类成功!id:"+t.category.id,type:"success"}),t.updateDialogDisplay=!1,t.getCategoryList(t.pageNum)):Object(l["Notification"])({title:"提示",message:"修改分类失败!",type:"error"})}))},deleteCategory:function(t){var e=this;this.$confirm("此操作将会删除id:"+t+"的分类,并且无法恢复!","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.baseUrl+"/admin/category?id="+t;n.a.delete(a,e.headerConfig).then((function(a){var i=a.data;200==i.code?(Object(l["Notification"])({title:"提示",message:"删除id:"+t+"分类成功!",type:"success"}),e.getCategoryList(e.pageNum)):Object(l["Notification"])({title:"提示",message:"删除分类失败!",type:"error"})}))})).catch((function(){}))},orderCategoryList:function(t){this.pageNum=1,this.orderProperty=t.prop,this.orderDirection=t.order,this.getCategoryList(1)},getCategoryList:function(t){var e=this;this.categoryListLoading=!0;var a=this.baseUrl+"/admin/category/list?pageNum="+t+"&pageSize="+this.pageSize+"&searchValue="+this.searchValue+"&orderProperty="+this.orderProperty+"&orderDirection="+this.orderDirection;n.a.get(a,this.headerConfig).then((function(a){var i=a.data;if(200==i.code){var o=i.data;e.categoryList=o.list,e.total=o.total,e.pageNum=t,e.categoryListLoading=!1}else Object(l["Notification"])({title:"提示",message:"获取分类列表失败！",type:"error"})}))},getToken:function(){var t=this.$cookies.get("zBlogAdminToken");null!=t?this.headerConfig.headers.Authorization=t:this.$router.push("/admin/login")}},created:function(){this.getToken(),this.getCategoryList(1),document.title="Blog后台|分类列表"}},c=s,d=a("2877"),g=Object(d["a"])(c,i,o,!1,null,"1c955f6e",null);e["default"]=g.exports}}]);