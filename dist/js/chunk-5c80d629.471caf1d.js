(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c80d629"],{"79f2":function(t,e,i){},"86cc":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("h1",[t._v("随说列表")]),i("el-divider"),i("el-row",{staticClass:"table-button-container",attrs:{gutter:10}},[i("el-col",{attrs:{lg:{span:20}}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.news.content="",t.addDialogDisplay=!0}}},[t._v("添加")])],1),i("el-col",{attrs:{lg:{span:4}}},[i("el-input",{attrs:{placeholder:"请输入关键字"},on:{change:function(e){return t.getList(1)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,stripe:"",border:""},on:{"sort-change":t.orderList}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"article-content ck-content",domProps:{innerHTML:t._s(e.row.content)}})]}}])}),i("el-table-column",{attrs:{label:"id",sortable:"custom",prop:"id",width:"100",align:"center"}}),i("el-table-column",{attrs:{label:"用户名",align:"center",prop:"username"}}),i("el-table-column",{attrs:{label:"创建时间",sortable:"custom",prop:"createBy",align:"center"}}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small"},on:{click:function(i){t.updateDialogDisplay=!0,t.news.id=e.row.id,t.news.content=e.row.content}}},[t._v("编辑")]),i("el-button",{staticClass:"el-button--danger",attrs:{size:"small"},on:{click:function(i){return t.deleteNews(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),i("el-pagination",{attrs:{total:t.total,"current-page":t.pageNum,"page-size":t.pageSize},on:{"current-change":t.getList}}),i("el-dialog",{attrs:{visible:t.addDialogDisplay,"close-on-click-modal":!1,width:"50%",title:"添加新随说"},on:{"update:visible":function(e){t.addDialogDisplay=e}}},[i("el-form",{staticStyle:{"text-align":"center"},model:{value:t.news,callback:function(e){t.news=e},expression:"news"}},[i("el-form-item",{attrs:{label:"内容"}},[i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.news.content,callback:function(e){t.$set(t.news,"content",e)},expression:"news.content"}})],1),i("el-form-item",[i("el-button",{staticClass:"el-button--primary",on:{click:t.add}},[t._v("提交")]),i("el-button",{on:{click:function(e){t.addDialogDisplay=!1}}},[t._v("取消")])],1)],1)],1),i("el-dialog",{attrs:{visible:t.updateDialogDisplay,"close-on-click-modal":!1,width:"50%",title:"修改随说"},on:{"update:visible":function(e){t.updateDialogDisplay=e}}},[i("el-form",{staticStyle:{"text-align":"center"},model:{value:t.news,callback:function(e){t.news=e},expression:"news"}},[i("el-form-item",[i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.news.content,callback:function(e){t.$set(t.news,"content",e)},expression:"news.content"}})],1),i("el-form-item",[i("el-button",{staticClass:"el-button--primary",on:{click:t.update}},[t._v("提交")]),i("el-button",{on:{click:function(e){t.updateDialogDisplay=!1}}},[t._v("取消")])],1)],1)],1)],1)},n=[],o=i("bc3a"),l=i.n(o),s=i("5c96"),r=i("3730"),c=i.n(r),d=i("fb3d"),u=i.n(d),p={name:"NewsList",data:function(){return{searchValue:"",listLoading:!0,list:[],orderDirection:"desc",orderProperty:"create_by",pageSize:5,pageNum:1,total:0,headerConfig:{headers:{Authorization:this.getToken()}},news:{id:0,content:""},addDialogDisplay:!1,updateDialogDisplay:!1,editor:u.a,editorConfig:{image:{toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},toolbar:{items:["undo","redo","|","bold","italic","underline","strikethrough","subscript","superscript","removeFormat","|","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","link","bulletedList","numberedList","|","alignment","indent","outdent","horizontalLine","|","imageUpload","blockQuote","insertTable","code","codeBlock","todoList"]},simpleUpload:{uploadUrl:this.baseUrl+"/admin/upload/images",headers:{Authorization:this.getToken()}}}}},components:{ckeditor:c.a.component},methods:{add:function(){var t=this,e=this.baseUrl+"/admin/news";l.a.post(e,this.news,this.headerConfig).then((function(e){var i=e.data;200==i.code?(Object(s["Notification"])({title:"提示",message:"添加新随说成功!",type:"success"}),t.addDialogDisplay=!1,t.getList(t.pageNum)):Object(s["Notification"])({title:"提示",message:"添加新随说失败!",type:"error"})}))},update:function(){var t=this,e=this.baseUrl+"/admin/news";l.a.put(e,this.news,this.headerConfig).then((function(e){var i=e.data;200==i.code?(Object(s["Notification"])({title:"提示",message:"修改随说成功!id:"+t.news.id,type:"success"}),t.updateDialogDisplay=!1,t.getList(t.pageNum)):Object(s["Notification"])({title:"提示",message:"修改随说失败!",type:"error"})}))},deleteNews:function(t){var e=this;this.$confirm("此操作将会删除id:"+t+"的随说,并且无法恢复!","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=e.baseUrl+"/admin/news?id="+t;l.a.delete(i,e.headerConfig).then((function(i){var a=i.data;200==a.code?(Object(s["Notification"])({title:"提示",message:"删除id:"+t+"随说成功!",type:"success"}),e.getList(e.pageNum)):Object(s["Notification"])({title:"提示",message:"删除随说失败!",type:"error"})}))})).catch((function(){}))},orderList:function(t){this.pageNum=1,this.orderProperty=t.prop,this.orderDirection=t.order,this.getList(1)},getList:function(t){var e=this;this.listLoading=!0;var i=this.baseUrl+"/admin/news/list?pageNum="+t+"&pageSize="+this.pageSize+"&orderProperty="+this.orderProperty+"&orderDirection="+this.orderDirection;l.a.get(i,this.headerConfig).then((function(t){var i=t.data;if(200==i.code){var a=i.data;e.list=a.list,e.total=a.total,e.pageNum=a.pageNum,e.listLoading=!1}}))},getToken:function(){var t=this.$cookies.get("zBlogAdminToken");return null==t&&this.$router.push("/admin/login"),t}},created:function(){this.getToken(),this.getList(1),document.title="Blog后台|随说列表"}},g=p,m=(i("a2ba"),i("2877")),f=Object(m["a"])(g,a,n,!1,null,"15bea5a6",null);e["default"]=f.exports},a2ba:function(t,e,i){"use strict";i("79f2")}}]);