(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c009db1"],{"2f8a":function(t,e,a){},8104:function(t,e,a){"use strict";a.r(e);var i,l,o,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("h1",[t._v("修改日志")]),a("el-form",{staticClass:"form",attrs:{"label-position":"top"}},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"标题"}},[a("el-input",{attrs:{type:"text","show-word-limit":"",maxlength:"100"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"简述"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:"6","show-word-limit":"",maxlength:"300"},model:{value:t.article.summary,callback:function(e){t.$set(t.article,"summary",e)},expression:"article.summary"}})],1),a("el-form-item",{staticStyle:{width:"20%"},attrs:{label:"封面"}},[a("el-upload",{staticClass:"uploader",attrs:{action:t.uploadUrl,limit:1,"http-request":t.upload,accept:"image/jpeg,image/png"}},[t.article.pictureUrl?a("img",{staticClass:"cover",attrs:{src:t.article.pictureUrl}}):a("i",{staticClass:"el-icon-plus uploader-icon"})])],1),a("el-row",[a("el-col",{attrs:{lg:3}},[a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.article.categoryId,callback:function(e){t.$set(t.article,"categoryId",e)},expression:"article.categoryId"}},t._l(t.categoryList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1)],1),a("el-col",{attrs:{lg:3}},[a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","allow-create":"",multiple:""},model:{value:t.article.tagList,callback:function(e){t.$set(t.article,"tagList",e)},expression:"article.tagList"}},t._l(t.tagList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.name,label:t.name}})})),1)],1)],1),a("el-col",{attrs:{lg:{span:3}}},[a("el-form-item",{attrs:{label:"置顶"}},[a("el-radio-group",{model:{value:t.article.top,callback:function(e){t.$set(t.article,"top",e)},expression:"article.top"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1)],1),a("el-col",{attrs:{lg:{span:3}}},[a("el-form-item",{attrs:{label:"隐藏"}},[a("el-radio-group",{model:{value:t.article.privated,callback:function(e){t.$set(t.article,"privated",e)},expression:"article.privated"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1)],1),a("el-col",{attrs:{lg:{span:3}}},[a("el-form-item",{attrs:{label:"点击量"}},[a("el-input-number",{model:{value:t.article.traffic,callback:function(e){t.$set(t.article,"traffic",e)},expression:"article.traffic"}})],1)],1),a("el-col",{attrs:{lg:3}},[a("el-form-item",{attrs:{label:"首次创建"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期"},model:{value:t.article.createBy,callback:function(e){t.$set(t.article,"createBy",e)},expression:"article.createBy"}})],1)],1),a("el-col",{attrs:{lg:3}},[a("el-form-item",{attrs:{label:"最后修改"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.article.modifiedBy,callback:function(e){t.$set(t.article,"modifiedBy",e)},expression:"article.modifiedBy"}})],1)],1)],1),a("el-form-item",{attrs:{label:"内容"}},[a("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}})],1)],1),a("div",{staticClass:"button-container"},[a("el-button",{staticClass:"el-button--primary",on:{click:t.submit}},[t._v("提 交")]),a("el-button",{on:{click:t.back}},[t._v("返 回")])],1),a("div",{staticClass:"el-backtop animate__animated animate__rollIn",staticStyle:{bottom:"190px",right:"40px"},on:{click:t.submit}},[a("i",{staticClass:"el-icon-check"})]),a("div",{staticClass:"el-backtop animate__animated animate__rollIn",staticStyle:{bottom:"140px",right:"40px"},on:{click:t.back}},[a("i",{staticClass:"el-icon-close"})])],1)},s=[],n=a("3730"),c=a.n(n),d=a("fb3d"),u=a.n(d),m=a("bc3a"),g=a.n(m),p=a("5c96"),f={name:"ArticleUpdate",data:function(){return{uploadUrl:this.baseUrl+"/admin/upload/images",editor:u.a,editorConfig:{language:"zh-cn",codeBlock:{languages:this.languages},image:{toolbar:["imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","|","resizeImage","|","imageTextAlternative","|","toggleImageCaption"],styles:["full","side","alignLeft","alignCenter","alignRight"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},simpleUpload:{headers:{Authorization:""},uploadUrl:this.baseUrl+"/admin/upload/images"},toolbar:{items:["undo","redo","heading","|","bold","italic","underline","strikethrough","subscript","superscript","removeFormat","|","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","imageUpload","blockQuote","insertTable","codeBlock","htmlEmbed","mediaEmbed","sourceEditing","specialCharacters","|","link","bulletedList","numberedList","todoList","|","alignment","outdent","indent","horizontalLine"],shouldNotGroupWhenFull:!0},blockToolbar:["paragraph","heading1","heading2","heading3","|","bulletedList","numberedList","|","blockQuote","uploadImage"],autosave:{waitingTime:1e4,save:function(t){var e=o+"/admin/article/content?id="+l;g.a.put(e,t.getData(),{headers:{Authorization:i,"Content-Type":"text/plain"}}).then((function(t){var e=t.data;200==e.code?Object(p["Notification"])({title:"提示",message:"内容已同步至服务端！",type:"success",duration:5e3,showClose:!0,position:"top-right"}):Object(p["Notification"])({title:"提示",message:"同步内容出错！",type:"error",duration:5e3,showClose:!0,position:"top-right"})}))}}},article:{title:"",summary:"",content:"",traffic:0,categoryId:"",top:!1,privated:!1,pictureUrl:"",tagList:[],createBy:"",modifiedBy:""},categoryList:[],tagList:[],headerConfig:{headers:{Authorization:""}}}},methods:{initArticle:function(){var t=this,e=this.$route.query.id,a=this.baseUrl+"/admin/article/detail?id="+e;g.a.get(a,this.headerConfig).then((function(a){var i=a.data;if(200==i.code){var l=i.data;t.article=l}else Object(p["Notification"])({title:"提示",message:"获取id为"+e+"的日志信息失败！",type:"error"})}))},getTagList:function(){var t=this,e=this.baseUrl+"/admin/tag/all";g.a.get(e,this.headerConfig).then((function(e){var a=e.data;if(200==a.code){var i=a.data;t.tagList=i}else Object(p["Notification"])({title:"提示",message:"获取标签列表失败！",type:"error"})}))},getCategoryList:function(){var t=this,e=this.baseUrl+"/admin/category/all";g.a.get(e,this.headerConfig).then((function(e){var a=e.data;if(200==a.code){var i=a.data;t.categoryList=i}else Object(p["Notification"])({title:"提示",message:"获取分类列表失败！",type:"error"})}))},upload:function(t){var e=this,a=t.action,i=new FormData,l=t.file;i.append("upload",l),console.log(i),g.a.post(a,i,this.headerConfig).then((function(t){var a=t.data;if(200==a.code){var i=a.url;e.article.pictureUrl=i,Object(p["Notification"])({title:"提示",message:"上传封面成功！",type:"success"})}else Object(p["Notification"])({title:"提示",message:"上传封面出错!",type:"error"})}))},submit:function(){var t=this;if(""==this.article.title)Object(p["Notification"])({title:"提示",message:"请填写标题",type:"warning"});else if(""==this.article.summary)Object(p["Notification"])({title:"提示",message:"请填写简述",type:"warning"});else if(""==this.article.categoryId)Object(p["Notification"])({title:"提示",message:"请选择分类",type:"warning"});else if(""==this.article.pictureUrl)Object(p["Notification"])({title:"提示",message:"请上传封面",type:"warning"});else if(""==this.article.content)Object(p["Notification"])({title:"提示",message:"请填写内容",type:"warning"});else if(""==this.article.tagList)Object(p["Notification"])({title:"提示",message:"请选择标签",type:"warning"});else{var e=this.baseUrl+"/admin/article";g.a.put(e,this.article,this.headerConfig).then((function(e){var a=e.data;200==a.code?(Object(p["Notification"])({title:"提示",message:"日志已成功更新！",type:"success"}),t.back()):Object(p["Notification"])({title:"提示",message:"日志更新失败！",type:"error"})}))}},back:function(){this.$router.back()},getToken:function(){var t=this.$cookies.get("zBlogAdminToken");null!=t?(this.headerConfig.headers.Authorization=t,this.editorConfig.simpleUpload.headers.Authorization=t):this.$router.push("/admin/login")}},components:{ckeditor:c.a.component},created:function(){i=this.$cookies.get("zBlogAdminToken"),l=this.$route.query.id,o=this.baseUrl,this.getToken(),this.initArticle(),this.getCategoryList(),this.getTagList(),document.title="Blog后台|修改日志"},mounted:function(){}},h=f,b=(a("beb7"),a("2877")),y=Object(b["a"])(h,r,s,!1,null,"4bf8e2a6",null);e["default"]=y.exports},beb7:function(t,e,a){"use strict";a("2f8a")}}]);